<div class="{{theme}} connexionDiv">
  <mat-card class="{{theme}} connexionCard">
    <form
      class="myForm"
      name="form"
      (ngSubmit)="f.form.valid && onSubmit()"
      #f="ngForm"
      novalidate>
      <fieldset class="formField">
      <legend>Connexion</legend>
        <div class="form-group">
      <p>
        <mat-form-field class="form-group" appearance="fill">
          <mat-label for="email">Entrez votre email</mat-label>
          <input matInput
            placeholder="ceci-est-un@example.com"
            class="form-control"
            name="email"
            required
            type="email"
            [(ngModel)]="form.email"
            email
            #email="ngModel">
            <div class="alert-danger" *ngIf="email.errors && f.submitted">
              <div *ngIf="email.errors?.['required']">L'email est obligatoire</div>
              <div *ngIf="email.errors?.['email']">
                L'email doit être valide
              </div>
            </div>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field class="form-group" appearance="fill" >
          <mat-label for="password">Entrez votre mot de passe</mat-label>
            <input
            matInput
            required
            placeholder="mot de passe"
            [type]="hide ? 'password' : 'text'"
            type="password"
            class="form-control"
            name="password"
            [(ngModel)]="form.password"
            minlength="6"
            #password="ngModel">
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
              <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <div class="alert-danger" *ngIf="password.errors && f.submitted">
              <div *ngIf="password.errors?.['required']">Le mot de passe est obligatoire</div>
              <div *ngIf="password.errors?.['minlength']">
                Le mot de passe doit avoir 6 caractères
              </div>
            </div>
        </mat-form-field>
      </p>
      <button class="submitButton form-group" type="submit"[disabled]="email.invalid">Se connecter</button>
      <div class="form-group">
        <div
          class="alert alert-danger"
          role="alert"
          *ngIf="f.submitted && isLoginFailed"
        >
          Login failed: {{ errorMessage }}
        </div>
      </div>
    </div>
    </fieldset>
      </form>
      <div class="alert alert-success" *ngIf="isLoggedIn">
        Connecté comme {{ roles }}.
      </div>
</mat-card>
</div>
